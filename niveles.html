<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Demo – Lights Out</title>
  <style>
    :root{
      --bg:#0d1117; --panel:#161b22; --accent:#3b82f6; --text:#e6edf3; --muted:#9aa7b2;
      --green:#22c55e; --red:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center; gap:24px;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      background:radial-gradient(90vmax 90vmax at 10% -10%, #112 0%, transparent 60%),
                 radial-gradient(90vmax 90vmax at 110% 110%, #121c2b 0%, transparent 60%), var(--bg);
      color:var(--text);
    }
    .card{
      background:linear-gradient(180deg, #18202c, #121821);
      border:1px solid #1f2835; border-radius:16px; padding:20px; box-shadow:0 4px 30px rgba(0,0,0,.25);
      width:min(92vw,780px);
    }
    h1{margin:.2rem 0 1rem; font-size:1.4rem; font-weight:700}
    .controls{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:14px}
    .controls label{font-size:.9rem; color:var(--muted)}
    select,button{
      background:var(--panel); color:var(--text); border:1px solid #263142; border-radius:10px;
      padding:10px 12px; font-weight:600; cursor:pointer; transition:.2s transform ease, .2s opacity ease;
    }
    button:hover{transform:translateY(-1px)}
    button:active{transform:translateY(0)}
    button.primary{border-color:var(--accent)}
    #status{margin-left:auto; font-size:.9rem; color:var(--muted)}.grid{display:grid; gap:8px; justify-content:center; margin:auto; padding:10px}
.cell{
  width:56px; height:56px; border-radius:10px; border:1px solid #243042; display:grid; place-items:center;
  font-weight:700; user-select:none; cursor:pointer; transition:filter .15s ease, transform .06s ease;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.06);
}
.cell:active{transform:scale(.98)}
.green{background:linear-gradient(180deg, #1fb968, var(--green));}
.red{background:linear-gradient(180deg, #e85a5a, var(--red));}
.footer{margin-top:14px; font-size:.9rem; color:var(--muted); text-align:center}
.win{color:#22d3ee; font-weight:700}

  </style>
</head>
<body>
  <div class="card">
    <h1>Lights Out – pulsa un cuadro y sus vecinos cambian</h1>
    <div class="controls">
      <label for="size">Tamaño:</label>
      <select id="size">
        <option value="3">3×3</option>
        <option value="4">4×4</option>
        <option value="5" selected>5×5</option>
        <option value="6">6×6</option>
        <option value="7">7×7</option>
      </select>
      <button id="random" class="primary">Aleatorizar</button>
      <button id="reset">Reiniciar</button>
      <span id="status">Objetivo: dejar todo en <strong>verde</strong></span>
    </div>
    <div id="grid" class="grid"></div>
    <div class="footer">
      Al hacer clic en una celda, cambia su estado y el de sus <em>vecinos ortogonales</em> (arriba, abajo, izquierda y derecha). <span id="win" class="win" hidden>¡Completado!</span>
    </div>
  </div>  <script>
    // ----- Estado del tablero -----
    let N = 5;
    let gridState = []; // true = verde, false = rojo

    const gridEl = document.getElementById('grid');
    const sizeSel = document.getElementById('size');
    const btnRandom = document.getElementById('random');
    const btnReset = document.getElementById('reset');
    const winEl = document.getElementById('win');

    function initState(n){
      gridState = Array.from({length:n}, () => Array.from({length:n}, () => true)); // todo verde
    }

    function inBounds(r,c){
      return r>=0 && c>=0 && r<N && c<N;
    }

    function toggle(r,c){
      // Cambia una celda si está dentro del tablero
      if(!inBounds(r,c)) return;
      gridState[r][c] = !gridState[r][c];
    }

    function press(r,c){
      // Al presionar, cambia la celda y sus vecinos ortogonales
      toggle(r,c);
      toggle(r-1,c); // arriba
      toggle(r+1,c); // abajo
      toggle(r,c-1); // izquierda
      toggle(r,c+1); // derecha
      draw();
      checkWin();
    }

    function draw(){
      // Renderiza classes según el estado
      const cells = gridEl.children;
      for(let r=0; r<N; r++){
        for(let c=0; c<N; c++){
          const idx = r*N + c;
          const el = cells[idx];
          el.classList.toggle('green', gridState[r][c]);
          el.classList.toggle('red', !gridState[r][c]);
        }
      }
    }

    function buildGrid(n){
      N = n;
      gridEl.style.gridTemplateColumns = `repeat(${N}, 56px)`;
      gridEl.innerHTML = '';
      for(let r=0; r<N; r++){
        for(let c=0; c<N; c++){
          const div = document.createElement('button');
          div.type = 'button';
          div.className = 'cell';
          div.addEventListener('click', () => press(r,c));
          gridEl.appendChild(div);
        }
      }
      initState(N);
      draw();
      winEl.hidden = true;
    }

    function randomize(){
      for(let r=0; r<N; r++){
        for(let c=0; c<N; c++){
          gridState[r][c] = Math.random() > 0.5; // aleatorio
        }
      }
      draw();
      winEl.hidden = true;
    }

    function reset(){
      initState(N);
      draw();
      winEl.hidden = true;
    }

    function checkWin(){
      // Ganas si todo está en verde (true)
      for(let r=0; r<N; r++){
        for(let c=0; c<N; c++){
          if(!gridState[r][c]){ winEl.hidden = true; return; }
        }
      }
      winEl.hidden = false;
    }

    // Eventos UI
    sizeSel.addEventListener('change', e => buildGrid(parseInt(e.target.value,10)));
    btnRandom.addEventListener('click', randomize);
    btnReset.addEventListener('click', reset);

    // Inicio
    buildGrid(N);
  </script></body>
</html>
