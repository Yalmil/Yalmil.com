<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Changelog</title>

  <!-- Requerido -->
  <link rel="icon" href="https://cdn.discordapp.com/emojis/1416607460201857168.png?v=1" type="image/png">
  <meta property="og:title" content="Yalmil.com" />
  <meta property="og:description" content="Changelog - Yalmil.com" />
  <meta property="og:image" content="https://cdn.discordapp.com/attachments/1355008732576088204/1402309070014124102/Screenshot_20250804-221210.png" />
  <meta property="og:url" content="https://yalmil.github.io/Yalmil.com/" />
  <meta property="og:type" content="website" />

  <!-- CSS -->
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');*{box-sizing:border-box;margin:0}body{font-family:'Poppins',sans-serif;display:flex;flex-direction:column;min-height:100vh;transition:.4s}@keyframes f{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(prefers-color-scheme:dark){body{background:linear-gradient(135deg,#0a0a0a,#1a001f);color:#e5ccff}header,footer{background:#15001f;color:#c084fc}header{border-bottom:2px solid #c084fc;text-align:center}header h1{color:#c084fc}main h2{color:#c084fc}.subpage{background:rgba(40,0,60,.25);border:2px solid #c084fc;color:#e5ccff}}@media(prefers-color-scheme:light){body{background:linear-gradient(135deg,#330a00,#662000);color:#ffd8a6}header,footer{background:#4d1a00;color:#ff8c00}header{border-bottom:2px solid #ff8c00;text-align:center}header h1{color:#ff8c00}main h2{color:#ff8c00}.subpage{background:rgba(60,20,0,.2);border:2px solid #ff8c00;color:#ffd8a6}}

  /* Estilos específicos del blog */
  .wrap{width:100%;max-width:1100px;margin:1.5rem auto;padding:1rem;animation:f .35s ease both}
  .card{background:rgba(255,255,255,0.04);border-radius:12px;padding:1rem;margin-bottom:1rem;border:1px solid rgba(255,255,255,0.08)}
  .grid-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem}
  .btn{padding:.5rem .8rem;background:rgba(161, 30, 201.25);border-radius:8px;cursor:pointer;border:1px solid rgba(255,255,255,.1)}
  #viewer{display:none;margin-top:1rem}
  </style>
</head>
<body>

<header class="subpage">
  <h1>Changelog</h1>
  <p>Changelog v1.1</p>
</header>

<main class="wrap">

  <section class="card">
    <h2>Historial de cambios</h2>
    <p>Cargados correctamente.</p>
  </section>

  <div id="cards" class="grid-cards">
    <!-- Aquí van los artículos auto-generados -->
  </div>

  <section id="viewer" class="card">
    <h2 id="v-title"></h2>
    <p id="v-desc" style="margin-top:.5rem"></p>
  </section>

</main>

<footer class="subpage" style="margin-top:auto;text-align:center;padding:1rem">
  <small>Changelog — Yalmil.com</small>
</footer>

<script>
async function loadYS(){
  const raw = await fetch("blogs.ys").then(r=>r.text());

  // Extraer bloques {...}
  const blocks = [...raw.matchAll(/\{([\s\S]*?)\}/g)].map(m=>m[1]);

  let parsed = [];

  for(let b of blocks){
    let obj = {};

    // Dividir por líneas
    const lines = b.split("\n");

    let currentKey = null;
    let currentValue = [];

    for (let line of lines){
      line = line.trim();
      if (!line) continue;

      // Si tiene "clave; valor"
      if (line.includes(";")){
        // Si ya había una clave previa, guardarla
        if (currentKey){
          obj[currentKey] = currentValue.join("\n").trim();
        }

        const [key, ...rest] = line.split(";");
        currentKey = key.trim();
        currentValue = [rest.join(";").trim()];
      } else {
        // Es continuación del valor (líneas extra)
        currentValue.push(line);
      }
    }

    // Guardar el último valor
    if (currentKey){
      obj[currentKey] = currentValue.join("\n").trim();
    }

    parsed.push({
      title: obj["Título"] || "",
      preview: obj["descripciónvisual"] || "",
      full: obj["descripción"] || ""
    });
  }

  return parsed;
}

function createCard(a, index){
  const c = document.createElement("article");
  c.className = "card";
  c.innerHTML = `
    <h3>${a.title}</h3>
    <p style="opacity:.8;margin:.3rem 0">${a.preview}</p>
    <button class="btn" data-i="${index}">Ver</button>
  `;
  return c;
}

function showArticle(a){
  document.getElementById("viewer").style.display = "block";
  document.getElementById("v-title").innerText = a.title;
  document.getElementById("v-desc").innerText = a.full;
}

(async()=>{
  const articles = await loadYS();

  const cards = document.getElementById("cards");
  cards.innerHTML = "";

  articles.forEach((a,i)=>{
    const card = createCard(a,i);
    cards.appendChild(card);
  });

  cards.addEventListener("click", e=>{
    if(e.target.tagName==="BUTTON"){
      const i = e.target.dataset.i;
      showArticle(articles[i]);
    }
  });

})();
</script>

</body>
</html>
